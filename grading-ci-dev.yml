stages:
  - grade

build-job:
  stage: grade
  image: $TESTING_DOCKER_IMAGE
  script:
    - echo $CI_PROJECT_NAME
    - git clone $PRIVATE_TEST_REPO
    - cd pa${PA}
    - python3 ../gradepy/grade.py --grade --pa $PA --user $CI_PROJECT_NAME --commit $CI_COMMIT_SHA
  rules:
    - if: $CI_PIPELINE_SOURCE == "api"
  artifacts:
    paths: 
      - pa${PA}/${PA}_grade.txt
      - pa${PA}/${PA}_debug.txt